//cam and rail

#include "WPILib.h"

#define IO (DriverStation::GetInstance()->GetEnhancedIO())

class Init : public SimpleRobot
{
	//declarations -- extra jag and gyro for balance?
	Encoder /*leftyEnc, rightyEnc,*/ yawEnc, pitchEnc, LTopEnc, LBotEnc;
	Joystick pilot, copilot;
	Jaguar lefty, righty, intake, lift, raiseA, yaw, pitch, LTop, LBot /*(if mobile top)*/;
	bool raiseB;
	
public:
	Init(void):
		pilot(1),
		copilot(2),
		lefty(1),
		righty(2),
		intake(3),
		lift(4),
		raiseA(5),
		yaw(6),
		pitch(7),
		LTop(8),
		LBot(9),
		//leftyEnc(1,2),
		//rightyEnc(3,4),
		LTopEnc(5,6),
		LBotEnc(5,6),
		yawEnc(7,8),
		pitchEnc(9,10)
		{
		}
	
	void Autonomous(void)
	{
		GetWatchdog().Kill();
	}
	void OperatorControl(void)
	{
		GetWatchdog().Kill();
		raiseB=1;
		while (IsOperatorControl())
		{
			if (copilot.GetRawButton(1))
				raiseB = 1;
			else if (copilot.GetRawButton(2))
				raiseB = 0;
			
			if (raiseB)//for tower controll
			{
				if (copilot.GetTop())//trigger top left - top tower
				{
					raiseA.Set(1);
				}
				else if (copilot.GetTrigger())//lower tower top tower
				{
					raiseA.Set(-1);
				}
				else {raiseA.Set(0);}
				
				//put auton top here
				/*
				 * For Use:
					yaw(6),
					pitch(7),
					LTop(8),
					LBot(9),
					LTopEnc(5,6),
					LBotEnc(5,6),
					yawEnc(7,8),
					pitchEnc(9,10)
				 */
				
				
				
				
			}
			else//for top override
			{
				if (copilot.GetTop())
				{
					yaw.Set(-.3);
				}
				else if (copilot.GetTrigger())//lower tower top tower
				{
					yaw.Set(.3);
				}
				else
				{
					yaw.Set(0);
				}
				
				if (copilot.GetRawButton(3))
				{
					pitch.Set(.3);
				}
				else if (copilot.GetRawButton(4))
				{
					pitch.Set(-.3);
				}
				else
				{
					pitch.Set(0);
				}
			}
			
			intake.Set(copilot.GetTwist());
			lift.Set(copilot.GetY());//raise ball (act on 2 jags)
			
			//Drive
			if (pilot.GetY() + 2 * pilot.GetX() > -1 && pilot.GetY() + 2 * pilot.GetX() < 1)
			{
				lefty.Set(pilot.GetY() + 2 * pilot.GetX());//left thumb?
			}
			else if ( pilot.GetY() + 2 * pilot.GetX() >= 1)
			{
				lefty.Set(1);
			}
			else {lefty.Set(-1);}
			if (pilot.GetY() - 2 * pilot.GetX() > -1 && pilot.GetY() - 2 * pilot.GetX() < 1)
			{
				righty.Set(pilot.GetY() - 2 * pilot.GetX());//twist is w/z
			}
			else if ( pilot.GetY() - 2 * pilot.GetX() >= 1)
			{
				lefty.Set(1);
			}
			else {righty.Set(-1);}
			
			
				
			Wait(0.005);				// wait for a motor update time
		}
	}
};

START_ROBOT_CLASS(Init);

